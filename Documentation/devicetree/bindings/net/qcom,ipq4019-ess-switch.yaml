# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/net/qcom,ipq4019-ess-switch.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Qualcomm IPQ ESS built-in switch driver

maintainers:
  - Romain Gantois <romain.gantois@bootlin.com>

$ref: ethernet-switch.yaml#

properties:
  compatible:
    const: qca,ipq4019-qca8337n

  reg:
    maxItems: 2
    description: One reg for base registers and one for psgmii_phy registers

  reg-names:
    maxItems: 2

  psgmii-ethphy:
    maxItems: 1
    description: Handle to the MDIO bus node corresponding to the PSGMII

  resets:
    maxItems: 1

  reset-names:
    maxItems: 1

  mdio:
    maxItems: 1
    description: Handle to the IPQ4019 MDIO Controller

required:
  - compatible
  - reg
  - reg-names
  - psgmii-ethphy
  - resets
  - mdio

unevaluatedProperties: false

examples:
  - |
    #include <dt-bindings/net/qcom-qca807x.h>
    switch: switch@c000000 {
         compatible = "qca,ipq4019-qca8337n";
         reg = <0xc000000 0x80000>, <0x98000 0x800>;
         reg-names = "base", "psgmii_phy";
         resets = <&gcc ESS_PSGMII_ARES>;
         mdio = <&mdio>;
         psgmii-ethphy = <&psgmiiphy>;

         ports {
             #address-cells = <1>;
             #size-cells = <0>;

             swport1: port@1 { /* MAC1 */
                  reg = <1>;
                  label = "lan1";
                  phy-handle = <&ethphy0>;
                  phy-mode = "psgmii";
             };

             swport2: port@2 { /* MAC2 */
                  reg = <2>;
                  label = "lan2";
                  phy-handle = <&ethphy1>;
                  phy-mode = "psgmii";
             };

             swport3: port@3 { /* MAC3 */
                  reg = <3>;
                  label = "lan3";
                  phy-handle = <&ethphy2>;
                  phy-mode = "psgmii";
             };

             swport4: port@4 { /* MAC4 */
                  reg = <4>;
                  label = "lan4";
                  phy-handle = <&ethphy3>;
                  phy-mode = "psgmii";
             };

             swport5: port@5 { /* MAC5 */
                  reg = <5>;
                  label = "wan";
                  phy-handle = <&ethphy4>;
                  phy-mode = "psgmii";
             };
         };
    };

...
